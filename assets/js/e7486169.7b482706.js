"use strict";(self.webpackChunkcardano_updates=self.webpackChunkcardano_updates||[]).push([[5237],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>c});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=p(n),c=a,h=d["".concat(s,".").concat(c)]||d[c]||m[c]||o;return n?r.createElement(h,i(i({ref:t},u),{},{components:n})):r.createElement(h,i({ref:t},u))}));function c(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},4349:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var r=n(7462),a=(n(7294),n(3905));const o={title:"Network Team Update",slug:"2022-11-09-network",authors:"coot",tags:["network"],hide_table_of_contents:!1},i=void 0,l={permalink:"/cardano-updates/quarterly/2022-11-09-network",editUrl:"https://github.com/input-output-hk/cardano-updates/tree/main/quarterly/2022-11-09-network.md",source:"@site/quarterly/2022-11-09-network.md",title:"Network Team Update",description:"Network Quarterly Update",date:"2022-11-09T00:00:00.000Z",formattedDate:"November 9, 2022",tags:[{label:"network",permalink:"/cardano-updates/quarterly/tags/network"}],readingTime:3.87,hasTruncateMarker:!1,authors:[{name:"Marcin Szamotulski",title:"Network Team Lead",url:"https://github.com/coot",imageURL:"https://github.com/coot.png",key:"coot"}],frontMatter:{title:"Network Team Update",slug:"2022-11-09-network",authors:"coot",tags:["network"],hide_table_of_contents:!1},prevItem:{title:"Consensus Quarterly Update",permalink:"/cardano-updates/quarterly/2022-11-15-consensus"},nextItem:{title:"Ledger Team Update",permalink:"/cardano-updates/quarterly/2022-11-07-ledger"}},s={authorsImageUrls:[void 0]},p=[{value:"Network Quarterly Update",id:"network-quarterly-update",level:2},{value:"2022-09 - 2022-11",id:"2022-09---2022-11",level:2},{value:"Summary of most important improvements",id:"summary-of-most-important-improvements",level:3},{value:"Detailed log",id:"detailed-log",level:3},{value:"Next quarter",id:"next-quarter",level:2}],u={toc:p};function m(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"network-quarterly-update"},"Network Quarterly Update"),(0,a.kt)("h2",{id:"2022-09---2022-11"},"2022-09 - 2022-11"),(0,a.kt)("h3",{id:"summary-of-most-important-improvements"},"Summary of most important improvements"),(0,a.kt)("p",null,"During this quarter the networking team delivered low level specification of\npeer sharing & eclipse evasion.  We held a session with the consensus & the\nscientists; we got a positive feedback on the design."),(0,a.kt)("p",null,"Further we focused on implementation of peer sharing.  We produced a ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/ouroboros-network/wiki/Peer-Sharing-Implementation-Plan"},"detail\ndesign")," and an ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/ouroboros-network/pull/4019"},"early implementation"),"."),(0,a.kt)("p",null,"We prepared the ",(0,a.kt)("em",{parentName:"p"},"P2P Single Relay Release")," (",(0,a.kt)("inlineCode",{parentName:"p"},"cardano-node-1.35.5"),").  It\nincludes over ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/ouroboros-network/pull/4120"},"130 patches")," of network stack improvements over the\nprevious version ",(0,a.kt)("inlineCode",{parentName:"p"},"1.35.4"),", which were accomplished over a longer period of\ntime.  Among them are both bug fixes and UX improvements for stake pool\noperators like simplified format of the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/cardano-node/pull/4563"},"topology file"),", or\nimprovements in the logged messages:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/ouroboros-network/pull/4015"},"tracing of early consensus exceptions")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/ouroboros-network/pull/4127"},"tracing of demotion of local root peers")," (traced with\n",(0,a.kt)("inlineCode",{parentName:"li"},"Warning")," severity), the trace is called ",(0,a.kt)("inlineCode",{parentName:"li"},"TraceDemoteLocalAsynchronous"),", in\n",(0,a.kt)("inlineCode",{parentName:"li"},"json")," format it is encoded as ",(0,a.kt)("inlineCode",{parentName:"li"},"DemoteLocalAsynchronous"),".  For an SPO\ntracking these demotion is vital (such demotion could indicate that a block\nproducer is no longer connected to its relays or vice versa)")),(0,a.kt)("p",null,"We also provide better integration with ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/ouroboros-network/pull/3979"},"systemd")," (socket\nactivation improvements) or improvements in the networking stack:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/ouroboros-network/pull/3785"},"exit policies"),","),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/ouroboros-network/pull/3915"},"peer metrics improvements"),","),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/ouroboros-network/pull/4106"},"DNS TTL")," improvements (which make it harder to misconfigure the\nsystem, an issue discovered by the performance & monitoring team),"),(0,a.kt)("li",{parentName:"ul"},"do not trigger inbound idle timeout for ",(0,a.kt)("inlineCode",{parentName:"li"},"node-to-client")," connections (",(0,a.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/ouroboros-network/pull/3844"},"pr\n#3844"),"), an issue reported to us by Matthias Benkort from\nCardano Foundation.")),(0,a.kt)("p",null,"Duncan has been making progress with the input endorsers demo. His simulation\nprovides a useful animated visualisation and live quantification of behaviour\nof the modeled design."),(0,a.kt)("p",null,"We also improved our e2e diffusion simulation by implementing header-body\nsplit, similar to what the real implementation does."),(0,a.kt)("p",null,"We also made some advances towards our future goals of P2P release for block\nproducer nodes (",(0,a.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/ouroboros-network/pull/3800"},"pr #3800")," - in review) & for Daedalus users\n(",(0,a.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/ouroboros-network/issues/3968"},"pr #3690")," - merged)."),(0,a.kt)("h3",{id:"detailed-log"},"Detailed log"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"We expanded diffusion simulation with block-fetch protocol bringing it closer\nto the production system.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"We addressed some additional technical depth in diffusion simulation")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"We slightly improved documentation & CI of io-sim and typed-protocols\nrepositories for open-source contributors.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"We closed a number of issues towards publishing io-sim on Hackage (only two\nessential issues are left open).")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"We pushed a branch of typed-protocols which captures one of the developer UX\nproblems in the API which we need to solve.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"We identified and fixed an issue related to systemd sockets.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"We identified and fixed an issue in consensus initialisation not giving\nfeedback on early errors.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"We deployed RT View, identified a number of issues which were communicated to\nthe performance & monitoring team.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"We finished high level & detailed design of peer sharing, very early\nimplementation of peer sharing is done (note that peer sharing cannot be\nsafely deployed without eclipse evasion & genesis).")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"We finished high level design of eclipse evasion, and started working on\na detailed design.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"We were assigned the role of release engineer for 1.35.5 release (the P2P\nsingle relay release); we prepared a cardano-node for 1.35.5 release which\ncontains more than 130 patches of just network stack improvements done over\nlast few months.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"We diagnosed and fixed an tricky bug in the peer state actions (a component\nwhich sits between outbound governor and connection manager). That bug was\nintroduced earlier this year and never released. It was caught by the QA\ntesting framework. We expanded our diffusion simulation to cover such case and\nalso mitigated a chance for reintroducing such a bug in future.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"We identified and quite likely mitigated a misconfiguration in the\nbenchmarking cluster (next benchmarking run will confirm our hypothesis).")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"We simplified the format of p2p topology file, we got positive feedback from\nSPOs.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"We raised severities of some of the logging messages, which is an important\nimprovement for SPOs, exchanges and other users of the system.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"We worked on input endorsers simulation which gives both animated and\nquantified live feedback on network operation, using a simplified model of\na TCP/IP network. "))),(0,a.kt)("h2",{id:"next-quarter"},"Next quarter"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Release the Single Relay P2P Release ",(0,a.kt)("inlineCode",{parentName:"p"},"1.35.5"),".")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Carry on with Peer Sharing (review, testing).")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Deliver a talk at ",(0,a.kt)("a",{parentName:"p",href:"https://sites.uclouvain.be/OPODIS2022/"},"Conference on Principles of Distributed Systems 2022")," in Brussels, Belgium.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Present Detailed Design of Eclipse Evasion and start implementation phase.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Work on P2P Block Producer release.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Carry on with publishing of ",(0,a.kt)("inlineCode",{parentName:"p"},"io-sim")," on ",(0,a.kt)("inlineCode",{parentName:"p"},"Hackage"),"."))))}m.isMDXComponent=!0}}]);